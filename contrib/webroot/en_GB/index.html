<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hockeypuck OpenPGP Keyserver">

    <title>Hockeypuck OpenPGP Keyserver</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon"/>
    <!-- To get row/col behavior for all device sizes we cannot use just bootstrap.min.css -->
    <link rel="stylesheet" type="text/css" href="/assets/bootstrap/3.3.7/css/bootstrap.css">

    <script type="text/javascript">
		 const infoScrollTime = "45s";
		 const whoScrollTime = "10s";
		 const frpCheckBoxLabelBaseStyle = "width: 90%;";	// instead of 80% set in 'div > label' selector
    </script>
	 <script type="text/javascript" src="/assets/js/effects.js"></script>

	 <link rel="stylesheet" type="text/css" href="/assets/css/pagestyle.css" media="screen" />
  </head>

  <body onresize="setWidths()">
    <div id="wrap">

      <div class="container language-selection">
		  <div class="row">
			 <div class="h6 col-xs-3 col-xs-offset-9 col-sm-2 col-sm-offset-10"
					style="float: right; margin-top: 0.5em; margin-right: 1em; line-size: 1.5em">
            <div>
				  <label for="locale" style="display: inline; vertical-align: middle; margin-right: 1em">Locale:</label>
				  <img src="/assets/icons/uk_flag_icon.svg" height="28px">
				</div>
				<!-- <form action="/setlocale" method="get" class="form" role="form"> -->
				<select name="locale" id="locale" style="margin-right: 1em"
						  onchange="window.location.href = this.value;">	<!-- should we use an actual form here? -->
				  <!-- onchange="this.form.submit();" -->
				  <!--
						value of option tag must correspond to a webroot subdirectory with index.html and 404.html
						files; free flag-icons can be found at https://www.iconfinder.com/search/?q=ensign
					 -->
				  <option value="/en_US/" lang="en" id="us-locale">USA</option>
				  <option value="/en_GB/" lang="en" id="gb-locale" selected="true">Great Britain</option>
				  <option value="/el_GR/" lang="el" id="gr-locale">Ελλάδα</option>
				</select> <!-- </form> -->
			 </div><!--closing col-->
		  </div><!--closing row-->
		</div><!--closing language-selection-->

      <div class="container">
		  <div class="page-header" id="banner">
			 <div class="row">
				<div class="col-xs-12 col-md-10 col-centered">
				  <h1 class="text-center title-font" style="margin-bottom: 0.5em">
                <strong>Hockeypuck</strong> OpenPGP keyserver</h1>
				</div><!--closing col-->
			 </div><!--closing row-->
		  </div>
      </div><!--closing page title container-->

      <div class="container">
        <div class="row">
			 <div class="col-xs-12 col-md-10 col-lg-8 col-centered">

				<form action="/pks/lookup" method="get" class="form" role="form">
				  <!-- This is only for redirecting to the 404.html *for this locale*, on Not Found status -->
				  <select name="locale" style="display: none">
					 <option value="/en_GB/" style="display: none" selected="true"></option>
				  </select>
				  
				  <div class="row">
					 <div class="control-group col-md-9">
						<div class="controls" style="max-width: 51em; margin: 0 auto;">
						  <input name="search" class="form-control h6 search-input" type="text" required autofocus
									placeholder="Search for OpenPGP KeyID (0x&#8230;) or key-words" />
						</div>
					 </div><!--closing col-->
					 <div id="search-button-div" class="control-group text-center col-md-3">
						<div class="controls">
						  <button type="submit" class="par btn btn-primary search-button">	<!-- white-space: normal -->
							 <span class="glyphicon glyphicon-search" style="margin-right: 0.5em"></span>
							 Search for Key
						  </button>
						</div>
					 </div><!--closing col-->
				  </div><!--closing row-->

				  <details class="par vanishing-box">
					 <summary class="text-center" style="display: list-item; line-height: 4em">
						<span style="line-height: 4em">Specialized Options</span>
					 </summary>
					 <!--
						  <div class="row">
							 <p class="text-center" style="margin-bottom: 0.7em">
								<b>Presentation Format:</b></p>
					     </div><!--closing row - - >
					 -->
					 <div class="control-group" style="margin-top: 0.3em">
						<div class="row">
						  <div class="controls col-xs-6 col-sm-offset-1 col-sm-5">
							 <div class="radiobutton-controls">
								<label class="radio" for="radios-0">
								  <input name="op" id="radios-0" value="index" checked type="radio" onclick="radioSet(this)" />
								  Regular index of matching keys
								</label>
								<label class="radio" for="radios-1">
								  <input name="op" id="radios-1" value="vindex" type="radio" onclick="radioSet(this)" />
								  Verbose index of matching keys
								</label>
								<label class="radio" for="radios-2">
								  <input name="op" id="radios-2" value="x-mrindex" type="radio" onclick="radioSet(this)" />
								  Machine readable regular index
								</label>
							 </div><!--closing radiobutton-controls-->
						  </div><!--closing controls-col-->
						  <div class="controls col-xs-6 col-sm-5">
							 <div class="radiobutton-controls">
								<label id="ascii-armored" class="text-center">
								  <u><i>Retrieve ASCII-armored keys</i></u></label>
								<label class="radio" for="radios-3">
								  <input name="op" id="radios-3" value="get" type="radio" onclick="radioSet(this)" />
								  By normal search<br />("keyring" of all results)
								</label>
								<label class="radio" for="radios-4">
								  <input name="op" id="radios-4" value="hget" type="radio" onclick="radioSet(this)" />
								  By full-key integrity verification hash (md5)
								</label>
							 </div><!--closing radiobutton-controls-->
						  </div><!--closing controls-col-->
						</div><!--closing row-->
					 </div><!--closing control-group-->

					 <div class="row col-xs-6 col-centered" style="margin-top: -1.2em; margin-bottom: -0.7em">
						<hr />
					 </div><!--closing col/row-->

					 <div class="control-group">
						<!--
							 <p class="text-center" style="margin-bottom: 0.4em">
								<b>Other Options:</b></p>
							 -->
						<div class="row">	<!-- style="margin-top: 0.3em" -->
						  <div class="controls col-xs-6 col-sm-offset-1 col-sm-5">
							 <div class="checkbox-controls">
								<label class="checkbox" for="fingerprint">
								  <input id="fingerprint" type="checkbox" name="fingerprint" checked="true" />
								  Show OpenPGP fingerprints
								</label>
							 </div><!--closing checkbox-controls-->
						  </div><!--closing controls-col-->
						  <div class="controls col-xs-6 col-sm-5">
							 <div class="checkbox-controls">
								<label class="checkbox" for="exact">
								  <input id="exact" type="checkbox" name="exact" value="on" />
								  Return only exact matches
								</label>
							 </div><!--closing checkbox-controls-->
						  </div><!--closing controls-col-->
						  <!--
								<div class="controls col-xs-10 col-centered">
								  <label class="checkbox" id="x-check" for="hash" style="color:#babdb6">
									 <input id="hash" type="checkbox" name="hash" style="display: none" disabled />
									 Εμφάνιση τιμής κατακερματισμού επαλήθευσης (md5 hash)
								  </label>
								</div>
								-->
						  <!-- Keep the "hash" and "mr" inputs in the form, but invisible -->
						  <input id="hash" type="checkbox" name="hash" style="display: none" disabled />
						  <input id="mr" type="checkbox" name="options" value="mr" style="display: none" disabled />
						</div><!--closing row-->
					 </div><!--closing control-group-->
              </details>
				</form>

  				<div class="row">
  				  <div class="col-xs-12"><hr /></div>
				</div><!--closing row-->
  				<div class="row">
  				  <div class="col-xs-12"><hr /></div>
				</div><!--closing row-->

  				<div class="row" style="display: block; margin-top: 0em">
  				  <div class="text-center col-xs-12">
					 <h6 style="margin-bottom: 1em">Share your OpenPGP public key:</h6>
					 <div class="control-group">
						<div class="controls">
						  <a id="showSubmitFormBtn" type="button" class="btn btn-primary par" data-toggle="modal"
							  href="#submitKey" style="white-space: normal">
							 <span class="glyphicon glyphicon-cloud-upload" style="margin-right: 0.5em"></span>
							 Submit Key for Storage
						  </a>
						</div>
					 </div>
				  </div>
				</div><!--closing row-->

			 </div><!--closing col-->
		  </div><!--closing row-->
      </div><!--closing container-->

      <!--Submit Key modal-->
      <div class="modal modal-click-out-close modal-fade-in-out modal-slide-down-up"
           id="submitKey" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <a href="#"></a>     <!-- Close modal on click outside: see 'modal-click-out-close > a' style selector! -->
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h6 class="modal-title" id="myModalLabel">Submit your OpenPGP public key</h6>
            </div>
            <div class="modal-body">
              <form action="/pks/add" method="post" id="keySubmitForm">
					 <!-- This is only for redirecting to the 404.html for this locale, on Not Found status -->
					 <select name="locale" style="display: none">
						<option value="/en_GB/" style="display: none" selected="true"></option>
					 </select>

                <div class="control-group">
                  <div class="controls">
                    <textarea id="textarea" name="keytext" rows="15" class="par" required
                              placeholder="Insert here your OpenPGP public key, in ASCII-armored format"></textarea>
                  </div>
                </div>
                <div class="modal-footer">
                  <a href="#" type="button" class="btn btn-default" data-dismiss="modal">Close</a>
                  <button type="submit" class="btn btn-primary">
                    <span class="glyphicon glyphicon-cloud-upload" style="margin-right: 0.5em"></span>
                    Submit Public Key
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div><!--closing Submit Key modal-->

      <!--About modal-->
      <div class="modal  modal-click-out-close modal-fade-in-out modal-slide-down-up"
           id="about" tabindex="-1" role="dialog" aria-labelledby="AboutLabel" aria-hidden="true">
        <a href="#"></a>     <!-- Close modal on click outside: see 'modal-click-out-close > a' style selector! -->
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <a href="#" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
              <h5 class="modal-title" id="AboutLabel">About this Server</h5>
            </div>
            <div class="modal-body">
              <div class="justified-text">
                <p><strong>OpenPGP</strong> is a method of encrypting and/or digitally signing data (for example
						an e-mail) in a “<em>end to end</em>” secure way. For encryption, the (semi-automated)
						procedure is as follows:</p>
              </div>
              <ul class="par" style="width: 85%; color:#204a87" align="left" type="disc">
                <li>We create a pair of OpenPGP cryptographic keys.</li>
                <li><i>We share our public key.</i></li>
                <li>The computer of each sender encrypts messages to us, using our public key.</li>
                <li>Our computer decrypts them, using our private key.</li>
              </ul>
              <div class="justified-text" style="margin-top: 0.5em">
                <p>In more detail, every user of public (insecure) networks, creates a pair of
						OpenPGP cryptographic keys, a public and a private one. He then shares the public key. <em>This server
						  supports exactly such a public sharing process.</em> In the process of sending a message, the sender's
						computer encrypts the message, using the public key of the receiver. This is accomplished in such a way
						that any intermediary (for example, an e-mail server) cannot know the content of the message. When the
						message is received, the recepient's computer decrypts it, using his private key.</p>
					 <p>Digital signing is, actually, akin to digital sealing of message data.
						Using the sender's public key, we can verify that there is no change to the original content of the
						message data. Since we use a specific sender's public key, the sender's ID is also verified.</p>
                <p><i>Hockeypuck</i> OpenPGP keyserver is compatible with <i>Synchronizing
						  Key Server (SKS)</i> type servers (they use the same synchronization protocol). In addition,
						<i>Hockeypuck</i> keyserver allows constraints to some OpenPGP parameters, which makes it resitant to
						a class of <a href="https://gist.github.com/rjhansen/67ab921ffb4084c865b3618d6955275f">
						  attaks that affected SKS servers, in 2019</a> and supports key deletion (in coordination with
					 administrators and after identity verification of the key owner), which contributes to its compatibility
					 with the european General Data Protection Regulation (GDPR).</p>
					 <p>________________</p>
					 <p>In the e-mail example, keep in mind that, by design of e-mail exchange protocols, the title,
						the address <em>and other metadata</em>, in the e-mail header, <u>are not encrypted</u>.</p>
              </div>
              <hr />
              <h5 style="line-height:1.5em">OpenPGP Resources</h5>
              <ul class="par" align="left" type="disc">
                <li><a href="https://emailselfdefense.fsf.org/en/" target="_blank">Email self-defence</a></li>
					 <li><a href="https://download.fsfe.org/advocacy/promomaterial/Email-self-defense/gnupg-leaflet.en.pdf">
							 GnuPG leaflet</a></li>
                <li><a href="https://gnupg.org/" target="_blank">GnuPG Homepage</a></li>
                <li><a href="https://github.com/hockeypuck/hockeypuck" target="_blank">
							 Hockeypuck project on Github</a></li>
                <li><a href="https://philzimmermann.com/EN/essays/WhyIWrotePGP.html">
							 Philip Zimmermann: Why I Wrote PGP</a></li>
                <li><a href="http://en.wikipedia.org/wiki/Pretty_Good_Privacy" target="_blank">
							 Wikipedia - Pretty Good Privacy (PGP)</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div><!--closing About modal-->

    </div><!--Closing content wrap-->

    <div id="footer">
      <div class="container">

        <div class="row" style="height: 3.5em; float: top">
			 <div class="justified-text col-xs-12" style="top: 0">
				<div class="scroll-left">
				  <div id="info-text-div">
					 <p id="scroll-par-info" style="line-height: 2em"> <!-- Use single paragraph here -->
						<u>Find a key by typing:</u> <b>(a) </b>Words that appear in the key owner identity
						(name, e-mail etc), ή <b>(b) </b>The (<i>8 or 16 hexadecimal digit</i>) KeyID with
						the hex nymber prefix "0x&#8230;"
						<b>---</b>
						Search of a complete PGP key fingerprint is not supported at the moment.
						Simply use the last 8 or 16 hex digits of the complete fingerprint, which
						constitute the KeyID.</p>
				<!--
						In case there are <u>more than four (4) results in a search</u>, <b>none</b> is
						returned. This is done for <i>securing the DB-stored e-mails</i>, from any attemnpts
						aiming their mass-recording. Make your requests more specific either by
						using terms appearing less usually (e.g., a <u>complete</u> e-mail), or more than one
						terms (e.g., first <u>and</u> last name).
				-->
				</div></div><!--closing scroll-left-->
			 </div><!--closing col-->
		  </div><!--closing row-->

        <div class="row" style="height: 6em; float: bottom">
			 <div class="col-xs-12">
				<div style="float: left; max-width: 15em;" >
				  <p class="muted credit">
					 <a href="#about">About</a> | <a href="/pks/lookup?op=stats">Statistics</a></p>
				</div><!--closing float-left-->
				<div style="float: right; width: calc(100% - 15em); height: 100%; margin: 0; right: 0; bottom: 0">
				  <div class="scroll-left">
					 <div id="who-text-div">
						<p id="scroll-par-who" style="margin-top: -0.25em">
						  Provided as a public service by the non-profit
						  <span style="color:#204a87">xxx.yyy.net</span>.</p>
						<p style="margin-top: -0.6em">For any problem contact
						  <a href="/pks/lookup?locale=/en_GB/&op=vindex&search=###ENTERNAMEHERE###">###ENTERNAMEHERE###</a>.</p>
				  </div></div><!--closing scroll-left-->
				</div><!--closing float-right-->
			 </div><!--closing col-->
		  </div><!--closing row-->

      </div><!--closing container-->
    </div><!--closing footer-->

    <script type="text/javascript">
		document.head.appendChild(styleWho);		// append to DOM
		document.head.appendChild(styleInfo);		// append to DOM
		function setWidths() {
		   setWidthWho();
		   setWidthInfo();
		}
      document.getElementById("exact").checked = false;
      document.getElementById("mr").checked = false;
		setWidths();
    </script>
  </body>
</html>
