<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hockeypuck OpenPGP Keyserver">

    <title>Hockeypuck OpenPGP Keyserver</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" type="text/css" href="/assets/bootstrap/3.3.7/css/bootstrap.min.css">
    <!-- <link rel="stylesheet" type="text/css" href="/assets/bootstrap/3.3.7/css/bootstrap.min.actual.css"> -->
	 <script src="/assets/js/searchpage.js"></script>
	 <link rel="stylesheet" type="text/css" href="/assets/css/searchpage.css" />

    <script type="text/javascript">
		// Values that may vary in each locale
       const infoScrollTime = "60s";	// also change the fallback CSS selector '#info-text-div'
		 const whoScrollTime = "10s";		// also change the fallback CSS selector '#who-text-div'
       const frpCheckBoxLabelBaseStyle = "margin-bottom: 1.1em;";
    </script>
  </head>

  <body onresize="tuneTextScrolling()">
    <div id="wrap">

      <div class="container language-selection">
        <!-- should we use an actual form here? -->
        <!-- <form action="/setlocale" method="get" class="form" role="form"> -->
		  <div class="row">
			 <!-- Use this with bootstrap.min.actual.css, as in el_GR locale -->
			 <!-- <div class="h6 col-xs-3 col-xs-offset-9 col-sm-2 col-sm-offset-10" -->
			 <div class="h6 col-lg-2 col-lg-offset-10"
					style="float: right; margin-top: 0.5em; margin-right: 1em; line-size: 1.5em">
            <div>		<!-- 'font-weight: 400' unnecessary with bootstrap.min.actual.css -->
				  <label for="locale" style="display: inline; vertical-align: middle; margin-right: 1em; font-weight: 400">Locale:</label>
				  <img src="/assets/icons/uk_flag_icon.svg" height="28px" style="vertical-align: middle">
				</div>
				<!-- Remove 'font-size: large' with bootstrap.min.actual.css -->
				<select name="locale" id="locale" style="margin-right: 1em; font-size: large;"
						  onchange="window.location.href = this.value;">	<!-- should we use an actual form here? -->
				  <!-- onchange="this.form.submit();" -->
				  <!--
						value of option tag must correspond to a webroot subdirectory with index.html and 404.html
						files; free flag-icons can be found at https://www.iconfinder.com/search/?q=ensign
					 -->
				  <option value="/en_US/" lang="en">USA</option>
				  <option value="/en_GB/" lang="en" selected="true">Great Britain</option>
				  <option value="/el_GR/" lang="el">ŒïŒªŒªŒ¨Œ¥Œ±</option>
				</select> <!-- </form> -->
			 </div><!--closing col-->
		  </div><!--closing row-->
		</div><!--closing language-selection-->

      <div class="container">
		  <div class="page-header" id="banner">
			 <div class="row">
				<div class="col-lg-12">
				  <h1 class="text-center title-font"><strong>Hockeypuck</strong> OpenPGP keyserver</h1>
			   </div><!--closing col-->
		    </div><!--closing row-->
		  </div>
      </div><!--closing page title container-->

      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2">
            <form action="/pks/lookup" method="get" class="form" role="form">
				  <!-- This is only for redirecting to the 404.html *for this locale*, on Not Found status -->
				  <select name="locale" style="display: none">
					 <option value="/en_GB/" style="display: none" selected="true"></option>
				  </select>

              <div class="control-group">
                <div class="controls" style="max-width:46em; margin:0 auto;">
                  <input name="search" class="form-control h6 search-input" type="text" required autofocus
								 placeholder="Search for OpenPGP KeyID (0x&#8230;) or key-words" />
                </div>
              </div>
              <div class="control-group text-center search-submit-buttons">
                <div class="controls">
                  <button type="submit" class="btn btn-primary">
                    <span class="glyphicon glyphicon-search"></span>
                    Search Key
                  </button>
                  <a id="showSubmitFormBtn" type="button" class="btn btn-primary" data-toggle="modal" href="#submitKey">
                    <span class="glyphicon glyphicon-cloud-upload"></span>
                    Submit Key
                  </a>
                </div>
              </div>
              <details class="par text-center" style="margin-top: 0.5em;">
                <summary style="display: list-item; line-height: 3.5em">Specialized Options</summary>
			       <div class="control-group col-md-4 col-md-offset-2">
                  <u>Search Options:</u>
                  <div id="search-options" class="controls">
                    <label class="checkbox" for="fingerprint" style="margin-bottom: 1.1em">
                      <input id="fingerprint" type="checkbox" name="fingerprint" checked="checked" />
                      Show OpenPGP fingerprints
                    </label>
                    <label class="checkbox" for="exact" style="margin-bottom: 1.1em">
                      <input id="exact" type="checkbox" name="exact" value="on" />
                      Only return exact matches
                    </label>
                    <label class="checkbox" for="mr">
                      <input id="mr" type="checkbox" name="options" value="mr" onchange="mrUpdated(this)" />
                      Machine readable formats &#x01f449; <!--üëâ hand pointing right-->
                    </label>
						  <!--
                    <label class="checkbox" for="hash">
                      <input id="hash" type="checkbox" name="hash" />
                      Show full-key hashes
                    </label>
						  -->
						  <!-- Keep the "hash" input in the form, but invisible -->
                    <input id="hash" type="checkbox" name="hash" style="display: none" disabled />
                  </div>
                </div>
                <div class="control-group col-md-offset-6">
                  <u>Presentation Format:</u>
                  <div class="controls">
                    <label class="radio" for="radios-0">
                      <input name="op" id="radios-0" value="index" checked="checked" type="radio" onclick="radioSet(this)" />
                      Get regular index of matching keys
                    </label>
                    <label class="radio" for="radios-1">
                      <input name="op" id="radios-1" value="vindex" type="radio" onclick="radioSet(this)" />
                      Get <strong>verbose</strong> index of matching keys
                    </label>
						  <label id="ascii-armored" class= "text-center" style="color:#babdb6">
							 <u><i>Retrieve ASCII-armored keys</i></u></label>
                    <label class="radio" for="radios-2" style="color:#babdb6">
                      <input name="op" id="radios-2" value="get" type="radio" onclick="radioSet(this)" disabled />
                      By normal search ("keyring" with all results)
                    </label>
                    <label class="radio" for="radios-3" style="color:#babdb6">
                      <input name="op" id="radios-3" value="hget" type="radio" onclick="radioSet(this)" disabled />
                      By full-key integrity verification hash (md5)
                    </label>
                  </div>
                </div>
              </details>
            </form>
          </div>
        </div>
      </div><!--closing container-->

      <!--Submit Key modal-->
      <div class="modal modal-click-out-close modal-fade-in-out modal-slide-down-up"
           id="submitKey" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <a href="#"></a>     <!-- Close modal on click outside: see 'modal-click-out-close > a' style selector! -->
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h6 class="modal-title" id="myModalLabel">Submit Your OpenPGP Public Key</h6>
            </div>
            <div class="modal-body">
              <form action="/pks/add" method="post" id="keySubmitForm">
					 <!-- This is only for redirecting to the 404.html for this locale, on Not Found status -->
					 <select name="locale" style="display: none">
						<option value="/en_GB/" style="display: none" selected="true"></option>
					 </select>

                <div class="control-group">
                  <div class="controls">
                    <textarea id="textarea" name="keytext" rows="15" class="par" required
										placeholder="Enter your ASCII-armored OpenPGP public key here"></textarea>
                  </div>
                </div>
                <div class="modal-footer">
                  <a href="#" type="button" class="btn btn-default" data-dismiss="modal">Close</a>
                  <button type="submit" class="btn btn-primary">
                    <span class="glyphicon glyphicon-cloud-upload"></span>
                    Submit Public Key
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div><!--closing Submit Key modal-->

      <!--About modal-->
		<div class="modal modal-click-out-close modal-fade-in-out modal-slide-down-up"
           id="about" tabindex="-1" role="dialog" aria-labelledby="AboutLabel" aria-hidden="true">
        <a href="#"></a>     <!-- Close modal on click outside: see 'modal-click-out-close > a' style selector! -->
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <a href="#" type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
              <h5 class="modal-title" id="AboutLabel">About this Server</h5>
            </div>
            <div class="modal-body">
              <p><strong>OpenPGP</strong> is a method of encrypting and/or digitally signing data (for example
					 an e-mail<b>*</b>) in an ‚Äú<em>end to end</em>‚Äù secure way. For encryption, the (semi-automated)
					 procedure is as follows:</p>
              <ul class="par" style="width: 85%; color:#204a87" align="left" type="disc">
                <li>We create a pair of OpenPGP cryptographic keys.</li>
                <li><i>We share our public key.</i></li>
                <li>The computer of each sender encrypts messages to us, using our public key.</li>
                <li>Our computer decrypts them, using our private key.</li>
              </ul>
              <p style="margin-top: 0.5em">
					 In more detail, every user of public (insecure) networks, creates a pair of OpenPGP cryptographic keys,
					 a public and a private one. He then shares the public key. <em>This server supports exactly such a public
						sharing process.</em> In the process of sending a message, the sender's computer encrypts the message,
					 using the public key of the receiver. This is accomplished in such a way that any intermediary (for example,
					 an e-mail server) cannot know the content of the message. When the message is received, the recepient's
					 computer decrypts it, using his private key.</p>
				  <p>Digital signing is, actually, akin to digital sealing of message data. Using the sender's public key,
					 we can verify that there is no change to the original content of the message data. Since we use a
					 specific sender's public key, the sender is also verified.</p>
              <p><i>Hockeypuck</i> OpenPGP keyserver is compatible with <i>Synchronizing Key Server (SKS)</i> type
					 servers (they use the same synchronization protocol). In addition, <i>Hockeypuck</i> keyserver allows
					 constraints to some OpenPGP parameters, which makes it resitant to a class of
					 <a href="https://gist.github.com/rjhansen/67ab921ffb4084c865b3618d6955275f">attaks that affected SKS
						servers, in 2019</a> and supports key deletion (in coordination with administrators and after identity
					 verification of the key owner), which contributes to its compatibility with the european General Data
					 Protection Regulation (GDPR).</p>
				  <p class="small">________________</p>
				  <p class="small">
					 In the e-mail example, keep in mind that, by design of e-mail exchange protocols and for interoperability
					 of existing software designed around these protocols, the title <em>and other metadata</em>, in the e-mail
					 header, <u>are not encrypted</u>.
				  </p>
              <hr />
              <h5>OpenPGP Resources</h5>
              <ul class="par" align="left" type="disc">
                <li><a href="https://emailselfdefense.fsf.org/en/" target="_blank">Email self-defence</a></li>
                <li><a href="https://download.fsfe.org/advocacy/promomaterial/Email-self-defense/gnupg-leaflet.en.pdf">
						  GnuPG leaflet</a></li>
                <li><a href="https://gnupg.org/" target="_blank">GnuPG Homepage</a></li>
                <li><a href="https://github.com/hockeypuck/hockeypuck" target="_blank">
						  Hockeypuck project on Github</a></li>
                <li><a href="https://philzimmermann.com/EN/essays/WhyIWrotePGP.html">
						  Philip Zimmermann: Why I Wrote PGP</a></li>
                <li><a href="http://en.wikipedia.org/wiki/Pretty_Good_Privacy" target="_blank">
						  Wikipedia - Pretty Good Privacy (PGP)</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div><!--closing About modal-->

    </div><!--Closing content wrap-->
    
    <div id="footer">
      <div class="container">

        <div class="row" style="height: 3.5em; float: top">
			 <div class="justified-text col-xs-12" style="top: 0">
				<div class="scroll-left">
				  <div id="info-text-div">
					 <p id="scroll-par-info" style="line-height: 2em"> <!-- Use single paragraph here -->
						<u>Find a key by typing:</u> <b>(a) </b>Words that appear in the key owner identity
						(name, e-mail etc), or <b>(b) </b>The (<i>8 or 16 hexadecimal digit</i>) KeyID with
						the hex number prefix "0x&#8230;"
						<b>---</b>
						Search of a complete PGP key fingerprint is not supported at the moment.
						Simply use the last 8 or 16 hex digits of the complete fingerprint, which
						constitute the KeyID.</p>
					 <!--
						  In case there are <u>more than four (4) results in a search</u>, <b>none</b> is
						  returned. This is done for <i>securing the DB-stored e-mails</i>, from any attemnpts
						  aiming their mass-recording. Make your requests more specific either by
						  using terms appearing less usually (e.g., a <u>complete</u> e-mail), or more than one
						  terms (e.g., first <u>and</u> last name).
						-->
				</div></div><!--closing scroll-left-->
			 </div><!--closing col-->
		  </div><!--closing row-->

        <div class="row" style="height: 6em">
			 <div class="col-xs-12">
				<div style="float: left; max-width: 15em;" >
				  <p class="muted credit">
					 <a href="#about">About</a> | <a href="/pks/lookup?op=stats">Statistics</a></p>
				</div><!--closing float-left-->
				<div style="float:right; width: calc(100% - 15em); height: 100%; margin: 0; right: 0; bottom: 0">
				  <div class="scroll-left">
					 <div id="who-text-div">
						<p id="scroll-par-who" style="margin-top: -0.25em">
						  Provided as a public service by the non-profit
						  <span style="color:#204a87">xxx.yyy.net</span>.</p>
						<p style="margin-top: -0.6em">For any problem contact
						  <a href="/pks/lookup?locale=/en_GB/&op=vindex&search=###ENTERNAMEHERE###">###ENTERNAMEHERE###</a>.</p>
				  </div></div><!--closing scroll-left-->
				</div><!--closing float-right-->
			 </div><!--closing col-->
		  </div><!--closing row-->

      </div><!--closing container-->
    </div><!--closing footer-->

    <script type="text/javascript">
		document.getElementById("exact").checked = false;
      var mrCheckBox = document.getElementById("mr");
		mrCheckBox.checked = false;
      mrUpdated(mrCheckBox);
      tuneTextScrolling();
    </script>
  </body>
</html>
